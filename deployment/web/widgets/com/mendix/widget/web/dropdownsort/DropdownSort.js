define(["exports","react","react-dom"],(function(e,t,n){"use strict";var o,a={exports:{}};
/*!
    Copyright (c) 2017 Jed Watson.
    Licensed under the MIT License (MIT), see
    http://jedwatson.github.io/classnames
  */o=a,function(){var e={}.hasOwnProperty;function t(){for(var n=[],o=0;o<arguments.length;o++){var a=arguments[o];if(a){var r=typeof a;if("string"===r||"number"===r)n.push(a);else if(Array.isArray(a)&&a.length){var i=t.apply(null,a);i&&n.push(i)}else if("object"===r)for(var l in a)e.call(a,l)&&a[l]&&n.push(l)}}return n.join(" ")}o.exports?(t.default=t,o.exports=t):window.classNames=t}();var r=a.exports;const i=({className:e,bootstrapStyle:n,children:o})=>t.Children.count(o)>0?t.createElement("div",{className:r("alert alert-".concat(n),e)},o):null;function l(e,n){const[o,a]=t.useState(),r=t.useCallback((()=>{const t=null==e?void 0:e.getBoundingClientRect();var n,r;r=o,(n=t)&&r&&n.height===r.height&&n.width===r.width&&n.bottom===r.bottom&&n.top===r.top&&n.left===r.left&&n.right===r.right||a(t)}),[o,e]);return function(e){const n=t.useRef(),o=t.useCallback((()=>{e(),n.current=window.requestAnimationFrame(o)}),[e]);t.useEffect((()=>{if(e)return n.current=window.requestAnimationFrame(o),()=>{window.cancelAnimationFrame(n.current)}}),[e,o])}(n?r:void 0),o}function u(e){var o,a,i,u,s,c,d;const[p,v]=t.useState(null!==(i=null!==(a=null===(o=e.defaultOption)||void 0===o?void 0:o.caption)&&void 0!==a?a:e.emptyOptionCaption)&&void 0!==i?i:""),[m,f]=t.useState(null!==(u=e.defaultOption)&&void 0!==u?u:{caption:null!==(s=e.emptyOptionCaption)&&void 0!==s?s:"",value:""}),[y,b]=t.useState(!1),[h,w]=t.useState(0),[C,g]=t.useState(null!==(c=e.defaultDirection)&&void 0!==c?c:"asc"),E=t.useRef(null),k=t.useRef(null),S=l(E.current,y),x=t.useCallback((e=>{v(e.caption),f(e),b(!1)}),[]);var N,O;N=[E,k],O=()=>b(!1),t.useEffect((()=>{const e=e=>{if(Array.isArray(N)){if(N.some((t=>!t.current||t.current.contains(e.target))))return}else if(!N.current||N.current.contains(e.target))return;O()};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[N,O]),t.useEffect((()=>{var t;m&&(null===(t=e.updateSort)||void 0===t||t.call(e,m,C))}),[C,m]);const D=!m||p===e.emptyOptionCaption,R=n.createPortal(t.createElement("ul",{ref:k,id:"".concat(e.name,"-dropdown-list"),className:"dropdown-list",role:"menu","data-focusindex":0,style:{position:"fixed",width:h,top:null==S?void 0:S.bottom,left:null==S?void 0:S.left}},e.options.map(((n,o)=>t.createElement("li",{className:r({"filter-selected":(null==m?void 0:m.value)===n.value}),key:o,onClick:e=>{e.preventDefault(),e.stopPropagation(),x(n)},onKeyDown:t=>{var a,r,i,l;"Enter"===t.key||" "===t.key?(t.preventDefault(),t.stopPropagation(),x(n)):"Tab"===t.key&&o+1===e.options.length?(t.preventDefault(),b(!1),null===(r=null===(a=E.current)||void 0===a?void 0:a.querySelector("button"))||void 0===r||r.focus()):("Tab"===t.key&&t.shiftKey&&0===o||"Escape"===t.key)&&(t.preventDefault(),b(!1),null===(l=null===(i=E.current)||void 0===i?void 0:i.querySelector("input"))||void 0===l||l.focus())},role:"menuitem",tabIndex:0},t.createElement("div",{className:"filter-label"},n.caption))))),document.body),A=t.useCallback((()=>{b((e=>!e)),setTimeout((()=>{var e,t;null===(t=null===(e=k.current)||void 0===e?void 0:e.querySelector("li.filter-selected"))||void 0===t||t.focus()}),10)}),[]);return t.createElement("div",{className:r("dropdown-container",e.className),"data-focusindex":null!==(d=e.tabIndex)&&void 0!==d?d:0,ref:E,style:e.styles},t.createElement("div",{className:"dropdown-triggerer-wrapper"},t.createElement("input",{value:D?"":p,placeholder:D?e.emptyOptionCaption:void 0,className:"form-control dropdown-triggerer",onClick:A,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),A())},"aria-haspopup":!0,ref:e=>{e&&e.clientWidth&&w(e.clientWidth)},"aria-expanded":y,"aria-controls":"".concat(e.name,"-dropdown-list"),"aria-label":e.screenReaderInputCaption}),t.createElement("button",{"aria-label":e.screenReaderButtonCaption,className:r("btn btn-default btn-sort",{"icon-asc":"asc"===C,"icon-desc":"desc"===C}),onClick:()=>g((e=>"asc"===e?"desc":"asc"))})),y&&R)}i.displayName="Alert",e.DropdownSort=function(e){var n,o,a,r,l,s,c;const d=null!==(n=window["com.mendix.widgets.web.sortable.sortContext"])&&void 0!==n?n:{},p=t.createElement(i,{bootstrapStyle:"danger"},"The Drop-down sort widget must be placed inside the header of the Gallery widget."),{sortDispatcher:v,attributes:m,initialSort:f}=null!==(o=t.useContext(d))&&void 0!==o?o:{};let y,b;const h=t.useMemo((()=>{var t,n,o;return[{caption:null!==(n=null===(t=e.emptyOptionCaption)||void 0===t?void 0:t.value)&&void 0!==n?n:"",value:""},...null!==(o=null==m?void 0:m.map((e=>({caption:e.caption,value:e.attribute.id}))))&&void 0!==o?o:[]]}),[m,null===(a=e.emptyOptionCaption)||void 0===a?void 0:a.value]),w=t.useCallback(((e,t)=>{const n=null==m?void 0:m.find((t=>t.attribute.id===e.value));v({getSortCondition:()=>function(e,t,n){if(!e||!e.sortable||!n)return;const{id:o}=e;return[o,t]}(null==n?void 0:n.attribute,t,e)})}),[m,v]);if(!v||!m)return p;if(f&&f.length>0){const[e]=f,[t,n]=e;t&&(y=h.find((e=>e.value===String(t)))),n&&(b=n)}return t.createElement(u,{key:null!==(r=null==y?void 0:y.value)&&void 0!==r?r:"sort-component",className:e.class,defaultDirection:b,defaultOption:y,emptyOptionCaption:null===(l=e.emptyOptionCaption)||void 0===l?void 0:l.value,name:e.name,options:h,screenReaderButtonCaption:null===(s=e.screenReaderButtonCaption)||void 0===s?void 0:s.value,screenReaderInputCaption:null===(c=e.screenReaderInputCaption)||void 0===c?void 0:c.value,styles:e.style,tabIndex:e.tabIndex,updateSort:w})},Object.defineProperty(e,"__esModule",{value:!0})}));
