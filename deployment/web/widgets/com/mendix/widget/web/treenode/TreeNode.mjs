import{createElement as e,createContext as n,useContext as t,useEffect as r,useCallback as a,useMemo as o,useRef as i,useState as d,useLayoutEffect as l}from"react";import"react-dom";var c,s={exports:{}};
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/c=s,function(){var e={}.hasOwnProperty;function n(){for(var t=[],r=0;r<arguments.length;r++){var a=arguments[r];if(a){var o=typeof a;if("string"===o||"number"===o)t.push(a);else if(Array.isArray(a)&&a.length){var i=n.apply(null,a);i&&t.push(i)}else if("object"===o)for(var d in a)e.call(a,d)&&a[d]&&t.push(d)}}return t.join(" ")}c.exports?(n.default=n,c.exports=n):window.classNames=n}();var u=s.exports;const h=({icon:n,className:t="",fallback:r})=>"glyph"===(null==n?void 0:n.type)?e("span",{className:u("glyphicon",t,n.iconClass),"aria-hidden":!0}):"image"===(null==n?void 0:n.type)?e("img",{className:t,src:n.iconUrl,"aria-hidden":!0,alt:""}):r||null;h.displayName="Icon";const m=n({level:0,informParentOfChildNodes:()=>null});const v={ArrowDown:["ArrowDown","Down"],ArrowLeft:["ArrowLeft","Left"],ArrowRight:["ArrowRight","Right"],ArrowUp:["ArrowUp","Up"],Space:[" "]},g=(e,n,t,r,i)=>{const d=(e=>a((n=>{const t=n.key,r=t in e?t:Object.keys(v).find((e=>{var n;return null===(n=v[e])||void 0===n?void 0:n.includes(t)}));if(r){const t=e[r];t&&("Enter"!==r&&"Space"!==r||n.stopPropagation(),n.preventDefault(),t(n))}}),[e]))(o((()=>({Enter:e,Space:e,Home:e=>n(e.currentTarget,"FIRST"),End:e=>n(e.currentTarget,"LAST"),ArrowUp:e=>n(e.currentTarget,"PREVIOUS","HORIZONTAL"),ArrowDown:e=>n(e.currentTarget,"NEXT","HORIZONTAL"),ArrowRight:a=>{"COLLAPSED_WITH_CSS"===t||"COLLAPSED_WITH_JS"===t?e(a):("EXPANDED"===t||r)&&n(a.currentTarget,"NEXT","VERTICAL")},ArrowLeft:a=>{"COLLAPSED_WITH_CSS"===t||"COLLAPSED_WITH_JS"===t||r?n(a.currentTarget,"PREVIOUS","VERTICAL"):"EXPANDED"===t&&e(a)}})),[e,n,t,r]));return a((e=>{if(!i(e))return d(e)}),[i,d])},C=({className:n})=>e("svg",{className:n,"aria-hidden":!0,width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},e("path",{d:"M1.64598 4.64601C1.69242 4.59945 1.7476 4.5625 1.80834 4.5373C1.86909 4.51209 1.93421 4.49911 1.99998 4.49911C2.06575 4.49911 2.13087 4.51209 2.19161 4.5373C2.25236 4.5625 2.30753 4.59945 2.35398 4.64601L7.99998 10.293L13.646 4.64601C13.6925 4.59952 13.7477 4.56264 13.8084 4.53749C13.8691 4.51233 13.9342 4.49938 14 4.49938C14.0657 4.49938 14.1308 4.51233 14.1916 4.53749C14.2523 4.56264 14.3075 4.59952 14.354 4.64601C14.4005 4.6925 14.4373 4.74769 14.4625 4.80842C14.4877 4.86916 14.5006 4.93426 14.5006 5.00001C14.5006 5.06575 14.4877 5.13085 14.4625 5.19159C14.4373 5.25233 14.4005 5.30752 14.354 5.35401L8.35398 11.354C8.30753 11.4006 8.25236 11.4375 8.19161 11.4627C8.13087 11.4879 8.06575 11.5009 7.99998 11.5009C7.93421 11.5009 7.86909 11.4879 7.80834 11.4627C7.7476 11.4375 7.69242 11.4006 7.64598 11.354L1.64598 5.35401C1.59942 5.30756 1.56247 5.25239 1.53727 5.19164C1.51206 5.1309 1.49908 5.06578 1.49908 5.00001C1.49908 4.93424 1.51206 4.86912 1.53727 4.80837C1.56247 4.74763 1.59942 4.69245 1.64598 4.64601V4.64601Z"}));function f({class:n,items:o,style:i,isUserDefinedLeafNode:l,showCustomIcon:c,startExpanded:s,iconPlacement:v,expandedIcon:g,collapsedIcon:f,tabIndex:D,animateIcon:E,animateTreeNodeContent:A}){const{level:w}=t(m),I=a(((n,t)=>{if("LOADING"===n)return e("img",{src:"data:image/svg+xml,%3Csvg%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Ccircle%20cx%3D%2212%22%20cy%3D%2212%22%20r%3D%2210.5%22%20stroke%3D%22%23F8F8F8%22%20stroke-width%3D%223%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%2F%3E%3Cmask%20id%3D%22path-2-inside-1%22%20fill%3D%22white%22%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20d%3D%22M0%2012.0524C0%2018.6274%205.37258%2024%2012.0524%2024C18.6274%2024%2024%2018.6274%2024%2012.0524C24%205.37258%2018.6274%200%2012.0524%200%22%2F%3E%3C%2Fmask%3E%3Cpath%20d%3D%22M24%2012.0524L21%2012.0524L24%2012.0524ZM-3%2012.0524C-3%2020.3013%203.73282%2027%2012.0524%2027V21C7.01235%2021%203%2016.9535%203%2012.0524H-3ZM12.0524%2027C20.2843%2027%2027%2020.2843%2027%2012.0524L21%2012.0524C21%2016.9706%2016.9706%2021%2012.0524%2021V27ZM27%2012.0524C27%203.73282%2020.3013%20-3%2012.0524%20-3V3C16.9535%203%2021%207.01235%2021%2012.0524L27%2012.0524Z%22%20fill%3D%22%23264AE5%22%20mask%3D%22url%28%23path-2-inside-1%29%22%2F%3E%3C%2Fsvg%3E",className:"widget-tree-node-loading-spinner",alt:"","aria-hidden":!0});const r="EXPANDED"===n;return c?e(h,{icon:r?g:f,className:"widget-tree-node-branch-header-icon"}):e(C,{className:u("widget-tree-node-branch-header-icon",{"widget-tree-node-branch-header-icon-animated":E,"widget-tree-node-branch-header-icon-collapsed-left":!r&&"left"===t,"widget-tree-node-branch-header-icon-collapsed-right":!r&&"right"===t})})}),[f,g,c,E]),[L,T]=d(null),S=a((e=>{e&&T(e)}),[]);((e,n)=>{const{level:a,informParentOfChildNodes:o}=t(m);r((()=>{a>0&&n()&&o(null==e?void 0:e.length)}),[e,a,o,n])})(o,a((()=>{var e,n;return null!==(n=null===(e=null==L?void 0:L.parentElement)||void 0===e?void 0:e.className.includes(p.bodyClassName))&&void 0!==n&&n}),[L]));const y=a(((e,n,t)=>{if(e&&e instanceof Element){const r=e=>{if(e){const n=Array.from(e.querySelectorAll("li.widget-tree-node-branch")),t=Array.from(e.querySelectorAll(".widget-tree-node-body[aria-hidden=true]"));return n.filter((e=>!t.some((n=>n.contains(e)))))}return[]},a=Array.from(document.body.querySelectorAll(".widget-tree-node[role=tree]")).find((n=>n.contains(e)));if(!a)return;const o=r(a),i=o.length;if(0===i)return;const d=o.findIndex((n=>n.isSameNode(e)));switch(n){case"FIRST":o[0].focus();break;case"LAST":o[i-1].focus();break;case"PREVIOUS":{if("VERTICAL"===t){const n=r(document).filter((n=>{var t;return null===(t=n.lastElementChild)||void 0===t?void 0:t.contains(e)}));return void(n.length>0&&n[n.length-1].focus())}const n=d-1,a=Math.max(n,0);a!==d&&o[a].focus();break}case"NEXT":{if("VERTICAL"===t){const n=r(e.lastElementChild);return void(n.length>0&&n[0].focus())}const n=d+1,a=Math.min(n,i-1);a!==d&&o[a].focus();break}}}}),[]);return o?e("ul",{className:u("widget-tree-node",n),style:i,ref:S,"data-focusindex":D||0,role:0===w?"tree":"group"},o.map((({id:n,value:t,content:r})=>e(N,{key:n,id:n,value:t,isUserDefinedLeafNode:l,startExpanded:s,iconPlacement:v,renderHeaderIcon:I,changeFocus:y,animateTreeNodeContent:A},r)))):null}const p={bodyClassName:"widget-tree-node-body",getHeaderId:e=>"".concat(e,"TreeNodeBranchHeader"),getBodyId:e=>"".concat(e,"TreeNodeBranchBody")};function N(n){const{level:o}=t(m),[c,s]=d(n.startExpanded?"EXPANDED":"COLLAPSED_WITH_JS"),[h,v]=d(n.isUserDefinedLeafNode||!n.children),C=a((e=>{void 0!==e&&(s((e=>"LOADING"===e?"EXPANDED":e)),v((n=>0===e&&!n||!(e>0&&n)&&n)))}),[]),f=i(null),N=i(null),{hasNestedTreeNode:D}=(e=>({hasNestedTreeNode:a((()=>{var n,t,r;return null===(r=null===(t=null===(n=e.current)||void 0===n?void 0:n.lastElementChild)||void 0===t?void 0:t.className.includes("widget-tree-node"))||void 0===r||r}),[])}))(f),{isAnimating:E,captureElementHeight:A,animateTreeNodeContent:w,cleanupAnimation:I}=(e=>{const n=i(),[t,r]=d(!1);return{isAnimating:t,captureElementHeight:a((()=>{var t,r;n.current=null!==(r=null===(t=e.current)||void 0===t?void 0:t.getBoundingClientRect().height)&&void 0!==r?r:0}),[]),animateTreeNodeContent:a((()=>{if(e.current&&void 0!==n.current&&!Number.isNaN(n.current)){const t=e.current.getBoundingClientRect().height;if(t-n.current!=0){r(!0),e.current.style.height="".concat(n.current,"px");const a=setTimeout((()=>{e.current.style.height="".concat(t,"px"),n.current=t}),1);return()=>clearTimeout(a)}}}),[]),cleanupAnimation:a((()=>{var n;r(!1),null===(n=e.current)||void 0===n||n.style.removeProperty("height")}),[])}})(f);l((()=>{if(n.animateTreeNodeContent&&"LOADING"!==c){const e=w();if(e)return e}}),[w,n.animateTreeNodeContent,c]);const L=a((e=>{var n,t,r,a,o;const i=e.target;return!(null===(n=N.current)||void 0===n?void 0:n.isSameNode(i))&&!(null===(r=null===(t=N.current)||void 0===t?void 0:t.firstElementChild)||void 0===r?void 0:r.contains(i))&&!(null===(o=null===(a=N.current)||void 0===a?void 0:a.lastElementChild)||void 0===o?void 0:o.isSameNode(i))}),[]);r((()=>{"LOADING"===c&&(D()||s("EXPANDED"))}),[D,c]);const T=a((e=>{L(e)||h||(A(),s((e=>"LOADING"===e?e:"COLLAPSED_WITH_JS"===e?"LOADING":"COLLAPSED_WITH_CSS"===e?"EXPANDED":"COLLAPSED_WITH_CSS")))}),[h,L,A]),S={"aria-expanded":"EXPANDED"===c,role:"treeitem",tabIndex:0};const y=g(T,n.changeFocus,c,h,L),b=a((e=>{L(e)||T(e)}),[T,L]);return e("li",{className:"widget-tree-node-branch",onClick:b,onKeyDown:y,ref:N,...S},e("span",{className:u("widget-tree-node-branch-header",{"widget-tree-node-branch-header-clickable":!h,"widget-tree-node-branch-header-reversed":"left"===n.iconPlacement}),id:p.getHeaderId(n.id)},e("span",{className:"widget-tree-node-branch-header-value"},n.value),!h&&"no"!==n.iconPlacement&&n.renderHeaderIcon(c,n.iconPlacement)),(!h&&"COLLAPSED_WITH_JS"!==c||E)&&e(m.Provider,{value:{level:o+1,informParentOfChildNodes:C}},e("div",{className:u(p.bodyClassName,{"widget-tree-node-branch-hidden":"COLLAPSED_WITH_CSS"===c&&!E,"widget-tree-node-branch-loading":"LOADING"===c}),id:p.getBodyId(n.id),"aria-hidden":"EXPANDED"!==c,ref:f,onTransitionEnd:I},n.children)))}function D(n){var t,r,a,o;const i="available"===n.datasource.status?null!==(r=null===(t=n.datasource.items)||void 0===t?void 0:t.map((e=>function(e,n){var t,r,a;return{id:e.id,value:"text"===n.headerType?null===(t=n.headerCaption)||void 0===t?void 0:t.get(e).value:null===(r=n.headerContent)||void 0===r?void 0:r.get(e),content:null===(a=n.children)||void 0===a?void 0:a.get(e)}}(e,n))))&&void 0!==r?r:[]:null,d="available"===(null===(a=n.expandedIcon)||void 0===a?void 0:a.status)?n.expandedIcon.value:null,l="available"===(null===(o=n.collapsedIcon)||void 0===o?void 0:o.status)?n.collapsedIcon.value:null;return e(f,{name:n.name,class:n.class,style:n.style,items:i,isUserDefinedLeafNode:!n.hasChildren,startExpanded:n.startExpanded,showCustomIcon:Boolean(n.expandedIcon)||Boolean(n.collapsedIcon),iconPlacement:n.showIcon,expandedIcon:d,collapsedIcon:l,tabIndex:n.tabIndex,animateIcon:n.animate&&n.animateIcon,animateTreeNodeContent:n.animate})}export{D as TreeNode};
