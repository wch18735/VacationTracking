define(["exports","react","react-dom"],(function(e,n,t){"use strict";var a,r={exports:{}};
/*!
    Copyright (c) 2017 Jed Watson.
    Licensed under the MIT License (MIT), see
    http://jedwatson.github.io/classnames
  */a=r,function(){var e={}.hasOwnProperty;function n(){for(var t=[],a=0;a<arguments.length;a++){var r=arguments[a];if(r){var o=typeof r;if("string"===o||"number"===o)t.push(r);else if(Array.isArray(r)&&r.length){var l=n.apply(null,r);l&&t.push(l)}else if("object"===o)for(var i in r)e.call(r,i)&&r[i]&&t.push(i)}}return t.join(" ")}a.exports?(n.default=n,a.exports=n):window.classNames=n}();var o=r.exports;const l=({icon:e,className:t="",fallback:a})=>"glyph"===(null==e?void 0:e.type)?n.createElement("span",{className:o("glyphicon",t,e.iconClass),"aria-hidden":!0}):"image"===(null==e?void 0:e.type)?n.createElement("img",{className:t,src:e.iconUrl,"aria-hidden":!0,alt:""}):a||null;l.displayName="Icon";const i=n.createContext({level:0,informParentOfChildNodes:()=>null});const d={ArrowDown:["ArrowDown","Down"],ArrowLeft:["ArrowLeft","Left"],ArrowRight:["ArrowRight","Right"],ArrowUp:["ArrowUp","Up"],Space:[" "]},c=(e,t,a,r,o)=>{const l=(e=>n.useCallback((n=>{const t=n.key,a=t in e?t:Object.keys(d).find((e=>{var n;return null===(n=d[e])||void 0===n?void 0:n.includes(t)}));if(a){const t=e[a];t&&("Enter"!==a&&"Space"!==a||n.stopPropagation(),n.preventDefault(),t(n))}}),[e]))(n.useMemo((()=>({Enter:e,Space:e,Home:e=>t(e.currentTarget,"FIRST"),End:e=>t(e.currentTarget,"LAST"),ArrowUp:e=>t(e.currentTarget,"PREVIOUS","HORIZONTAL"),ArrowDown:e=>t(e.currentTarget,"NEXT","HORIZONTAL"),ArrowRight:n=>{"COLLAPSED_WITH_CSS"===a||"COLLAPSED_WITH_JS"===a?e(n):("EXPANDED"===a||r)&&t(n.currentTarget,"NEXT","VERTICAL")},ArrowLeft:n=>{"COLLAPSED_WITH_CSS"===a||"COLLAPSED_WITH_JS"===a||r?t(n.currentTarget,"PREVIOUS","VERTICAL"):"EXPANDED"===a&&e(n)}})),[e,t,a,r]));return n.useCallback((e=>{if(!o(e))return l(e)}),[o,l])},s=({className:e})=>n.createElement("svg",{className:e,"aria-hidden":!0,width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M1.64598 4.64601C1.69242 4.59945 1.7476 4.5625 1.80834 4.5373C1.86909 4.51209 1.93421 4.49911 1.99998 4.49911C2.06575 4.49911 2.13087 4.51209 2.19161 4.5373C2.25236 4.5625 2.30753 4.59945 2.35398 4.64601L7.99998 10.293L13.646 4.64601C13.6925 4.59952 13.7477 4.56264 13.8084 4.53749C13.8691 4.51233 13.9342 4.49938 14 4.49938C14.0657 4.49938 14.1308 4.51233 14.1916 4.53749C14.2523 4.56264 14.3075 4.59952 14.354 4.64601C14.4005 4.6925 14.4373 4.74769 14.4625 4.80842C14.4877 4.86916 14.5006 4.93426 14.5006 5.00001C14.5006 5.06575 14.4877 5.13085 14.4625 5.19159C14.4373 5.25233 14.4005 5.30752 14.354 5.35401L8.35398 11.354C8.30753 11.4006 8.25236 11.4375 8.19161 11.4627C8.13087 11.4879 8.06575 11.5009 7.99998 11.5009C7.93421 11.5009 7.86909 11.4879 7.80834 11.4627C7.7476 11.4375 7.69242 11.4006 7.64598 11.354L1.64598 5.35401C1.59942 5.30756 1.56247 5.25239 1.53727 5.19164C1.51206 5.1309 1.49908 5.06578 1.49908 5.00001C1.49908 4.93424 1.51206 4.86912 1.53727 4.80837C1.56247 4.74763 1.59942 4.69245 1.64598 4.64601V4.64601Z"}));function u({class:e,items:t,style:a,isUserDefinedLeafNode:r,showCustomIcon:d,startExpanded:c,iconPlacement:u,expandedIcon:C,collapsedIcon:v,tabIndex:f,animateIcon:g,animateTreeNodeContent:E}){const{level:p}=n.useContext(i),N=n.useCallback(((e,t)=>{if("LOADING"===e)return n.createElement("img",{src:"data:image/svg+xml,%3Csvg%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Ccircle%20cx%3D%2212%22%20cy%3D%2212%22%20r%3D%2210.5%22%20stroke%3D%22%23F8F8F8%22%20stroke-width%3D%223%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%2F%3E%3Cmask%20id%3D%22path-2-inside-1%22%20fill%3D%22white%22%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20d%3D%22M0%2012.0524C0%2018.6274%205.37258%2024%2012.0524%2024C18.6274%2024%2024%2018.6274%2024%2012.0524C24%205.37258%2018.6274%200%2012.0524%200%22%2F%3E%3C%2Fmask%3E%3Cpath%20d%3D%22M24%2012.0524L21%2012.0524L24%2012.0524ZM-3%2012.0524C-3%2020.3013%203.73282%2027%2012.0524%2027V21C7.01235%2021%203%2016.9535%203%2012.0524H-3ZM12.0524%2027C20.2843%2027%2027%2020.2843%2027%2012.0524L21%2012.0524C21%2016.9706%2016.9706%2021%2012.0524%2021V27ZM27%2012.0524C27%203.73282%2020.3013%20-3%2012.0524%20-3V3C16.9535%203%2021%207.01235%2021%2012.0524L27%2012.0524Z%22%20fill%3D%22%23264AE5%22%20mask%3D%22url%28%23path-2-inside-1%29%22%2F%3E%3C%2Fsvg%3E",className:"widget-tree-node-loading-spinner",alt:"","aria-hidden":!0});const a="EXPANDED"===e;return d?n.createElement(l,{icon:a?C:v,className:"widget-tree-node-branch-header-icon"}):n.createElement(s,{className:o("widget-tree-node-branch-header-icon",{"widget-tree-node-branch-header-icon-animated":g,"widget-tree-node-branch-header-icon-collapsed-left":!a&&"left"===t,"widget-tree-node-branch-header-icon-collapsed-right":!a&&"right"===t})})}),[v,C,d,g]),[D,A]=n.useState(null),w=n.useCallback((e=>{e&&A(e)}),[]);((e,t)=>{const{level:a,informParentOfChildNodes:r}=n.useContext(i);n.useEffect((()=>{a>0&&t()&&r(null==e?void 0:e.length)}),[e,a,r,t])})(t,n.useCallback((()=>{var e,n;return null!==(n=null===(e=null==D?void 0:D.parentElement)||void 0===e?void 0:e.className.includes(m.bodyClassName))&&void 0!==n&&n}),[D]));const I=n.useCallback(((e,n,t)=>{if(e&&e instanceof Element){const a=e=>{if(e){const n=Array.from(e.querySelectorAll("li.widget-tree-node-branch")),t=Array.from(e.querySelectorAll(".widget-tree-node-body[aria-hidden=true]"));return n.filter((e=>!t.some((n=>n.contains(e)))))}return[]},r=Array.from(document.body.querySelectorAll(".widget-tree-node[role=tree]")).find((n=>n.contains(e)));if(!r)return;const o=a(r),l=o.length;if(0===l)return;const i=o.findIndex((n=>n.isSameNode(e)));switch(n){case"FIRST":o[0].focus();break;case"LAST":o[l-1].focus();break;case"PREVIOUS":{if("VERTICAL"===t){const n=a(document).filter((n=>{var t;return null===(t=n.lastElementChild)||void 0===t?void 0:t.contains(e)}));return void(n.length>0&&n[n.length-1].focus())}const n=i-1,r=Math.max(n,0);r!==i&&o[r].focus();break}case"NEXT":{if("VERTICAL"===t){const n=a(e.lastElementChild);return void(n.length>0&&n[0].focus())}const n=i+1,r=Math.min(n,l-1);r!==i&&o[r].focus();break}}}}),[]);return t?n.createElement("ul",{className:o("widget-tree-node",e),style:a,ref:w,"data-focusindex":f||0,role:0===p?"tree":"group"},t.map((({id:e,value:t,content:a})=>n.createElement(h,{key:e,id:e,value:t,isUserDefinedLeafNode:r,startExpanded:c,iconPlacement:u,renderHeaderIcon:N,changeFocus:I,animateTreeNodeContent:E},a)))):null}const m={bodyClassName:"widget-tree-node-body",getHeaderId:e=>"".concat(e,"TreeNodeBranchHeader"),getBodyId:e=>"".concat(e,"TreeNodeBranchBody")};function h(e){const{level:t}=n.useContext(i),[a,r]=n.useState(e.startExpanded?"EXPANDED":"COLLAPSED_WITH_JS"),[l,d]=n.useState(e.isUserDefinedLeafNode||!e.children),s=n.useCallback((e=>{void 0!==e&&(r((e=>"LOADING"===e?"EXPANDED":e)),d((n=>0===e&&!n||!(e>0&&n)&&n)))}),[]),u=n.useRef(null),h=n.useRef(null),{hasNestedTreeNode:C}=(e=>({hasNestedTreeNode:n.useCallback((()=>{var n,t,a;return null===(a=null===(t=null===(n=e.current)||void 0===n?void 0:n.lastElementChild)||void 0===t?void 0:t.className.includes("widget-tree-node"))||void 0===a||a}),[])}))(u),{isAnimating:v,captureElementHeight:f,animateTreeNodeContent:g,cleanupAnimation:E}=(e=>{const t=n.useRef(),[a,r]=n.useState(!1);return{isAnimating:a,captureElementHeight:n.useCallback((()=>{var n,a;t.current=null!==(a=null===(n=e.current)||void 0===n?void 0:n.getBoundingClientRect().height)&&void 0!==a?a:0}),[]),animateTreeNodeContent:n.useCallback((()=>{if(e.current&&void 0!==t.current&&!Number.isNaN(t.current)){const n=e.current.getBoundingClientRect().height;if(n-t.current!=0){r(!0),e.current.style.height="".concat(t.current,"px");const a=setTimeout((()=>{e.current.style.height="".concat(n,"px"),t.current=n}),1);return()=>clearTimeout(a)}}}),[]),cleanupAnimation:n.useCallback((()=>{var n;r(!1),null===(n=e.current)||void 0===n||n.style.removeProperty("height")}),[])}})(u);n.useLayoutEffect((()=>{if(e.animateTreeNodeContent&&"LOADING"!==a){const e=g();if(e)return e}}),[g,e.animateTreeNodeContent,a]);const p=n.useCallback((e=>{var n,t,a,r,o;const l=e.target;return!(null===(n=h.current)||void 0===n?void 0:n.isSameNode(l))&&!(null===(a=null===(t=h.current)||void 0===t?void 0:t.firstElementChild)||void 0===a?void 0:a.contains(l))&&!(null===(o=null===(r=h.current)||void 0===r?void 0:r.lastElementChild)||void 0===o?void 0:o.isSameNode(l))}),[]);n.useEffect((()=>{"LOADING"===a&&(C()||r("EXPANDED"))}),[C,a]);const N=n.useCallback((e=>{p(e)||l||(f(),r((e=>"LOADING"===e?e:"COLLAPSED_WITH_JS"===e?"LOADING":"COLLAPSED_WITH_CSS"===e?"EXPANDED":"COLLAPSED_WITH_CSS")))}),[l,p,f]),D={"aria-expanded":"EXPANDED"===a,role:"treeitem",tabIndex:0};const A=c(N,e.changeFocus,a,l,p),w=n.useCallback((e=>{p(e)||N(e)}),[N,p]);return n.createElement("li",{className:"widget-tree-node-branch",onClick:w,onKeyDown:A,ref:h,...D},n.createElement("span",{className:o("widget-tree-node-branch-header",{"widget-tree-node-branch-header-clickable":!l,"widget-tree-node-branch-header-reversed":"left"===e.iconPlacement}),id:m.getHeaderId(e.id)},n.createElement("span",{className:"widget-tree-node-branch-header-value"},e.value),!l&&"no"!==e.iconPlacement&&e.renderHeaderIcon(a,e.iconPlacement)),(!l&&"COLLAPSED_WITH_JS"!==a||v)&&n.createElement(i.Provider,{value:{level:t+1,informParentOfChildNodes:s}},n.createElement("div",{className:o(m.bodyClassName,{"widget-tree-node-branch-hidden":"COLLAPSED_WITH_CSS"===a&&!v,"widget-tree-node-branch-loading":"LOADING"===a}),id:m.getBodyId(e.id),"aria-hidden":"EXPANDED"!==a,ref:u,onTransitionEnd:E},e.children)))}e.TreeNode=function(e){var t,a,r,o;const l="available"===e.datasource.status?null!==(a=null===(t=e.datasource.items)||void 0===t?void 0:t.map((n=>function(e,n){var t,a,r;return{id:e.id,value:"text"===n.headerType?null===(t=n.headerCaption)||void 0===t?void 0:t.get(e).value:null===(a=n.headerContent)||void 0===a?void 0:a.get(e),content:null===(r=n.children)||void 0===r?void 0:r.get(e)}}(n,e))))&&void 0!==a?a:[]:null,i="available"===(null===(r=e.expandedIcon)||void 0===r?void 0:r.status)?e.expandedIcon.value:null,d="available"===(null===(o=e.collapsedIcon)||void 0===o?void 0:o.status)?e.collapsedIcon.value:null;return n.createElement(u,{name:e.name,class:e.class,style:e.style,items:l,isUserDefinedLeafNode:!e.hasChildren,startExpanded:e.startExpanded,showCustomIcon:Boolean(e.expandedIcon)||Boolean(e.collapsedIcon),iconPlacement:e.showIcon,expandedIcon:i,collapsedIcon:d,tabIndex:e.tabIndex,animateIcon:e.animate&&e.animateIcon,animateTreeNodeContent:e.animate})},Object.defineProperty(e,"__esModule",{value:!0})}));
